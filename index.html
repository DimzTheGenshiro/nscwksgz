<html class="scroll-smooth" lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   AutomationBot | Store Digital Product
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Inter', sans-serif;
    }
  </style>
 </head>
 <body class="bg-gray-50 min-h-screen flex flex-col">
  <div class="flex-grow flex flex-col" id="app">
   <!-- Header -->
   <header class="bg-white shadow-md sticky top-0 z-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-between items-center h-16">
     <a class="text-2xl font-bold text-indigo-600 hover:text-indigo-700" href="#" id="nav-dashboard">
      AutomationBot
     </a>
     <nav class="space-x-4 hidden md:flex">
      <a class="text-gray-700 hover:text-indigo-600 font-semibold" href="#" id="nav-dashboard">
       Dashboard
      </a>
      <a class="text-gray-700 hover:text-indigo-600 font-semibold" href="#" id="nav-products">
       Products
      </a>
      <a class="text-gray-700 hover:text-indigo-600 font-semibold" href="#" id="nav-checkout">
       Checkout
      </a>
      <a class="text-gray-700 hover:text-indigo-600 font-semibold" href="#" id="nav-status">
       Order Status
      </a>
      <a class="text-gray-700 hover:text-indigo-600 font-semibold" href="#" id="nav-login">
       Login
      </a>
      <a class="text-gray-700 hover:text-indigo-600 font-semibold" href="#" id="nav-register">
       Register
      </a>
     </nav>
     <button class="md:hidden text-gray-700 hover:text-indigo-600 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="mobile-menu-button">
      <i class="fas fa-bars fa-lg">
      </i>
     </button>
    </div>
    <div class="md:hidden hidden bg-white shadow-inner" id="mobile-menu">
     <a class="block px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-semibold" href="#" id="nav-dashboard-m">
      Dashboard
     </a>
     <a class="block px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-semibold" href="#" id="nav-products-m">
      Products
     </a>
     <a class="block px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-semibold" href="#" id="nav-checkout-m">
      Checkout
     </a>
     <a class="block px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-semibold" href="#" id="nav-status-m">
      Order Status
     </a>
     <a class="block px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-semibold" href="#" id="nav-login-m">
      Login
     </a>
     <a class="block px-4 py-2 text-gray-700 hover:bg-indigo-50 hover:text-indigo-600 font-semibold" href="#" id="nav-register-m">
      Register
     </a>
    </div>
   </header>
   <!-- Main Content -->
   <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
    <!-- Dashboard Page -->
    <section class="space-y-8" id="page-dashboard">
     <!-- Slider -->
     <div class="relative w-full max-w-4xl mx-auto">
      <div class="overflow-hidden rounded-lg shadow-lg">
       <div class="flex transition-transform duration-500 ease-in-out" id="slider">
        <img alt="Promo banner showing discount on website design services with colorful abstract background" class="w-full flex-shrink-0" height="300" src="https://storage.googleapis.com/a1aa/image/69d6c91e-6e22-490f-2bc9-2d89dbd67828.jpg" width="800"/>
        <img alt="Promo banner showing script bundle sale with coding icons and bright colors" class="w-full flex-shrink-0" height="300" src="https://storage.googleapis.com/a1aa/image/3ff6fc3c-eb0d-4272-98b1-df51ef3d1de0.jpg" width="800"/>
        <img alt="Promo banner showing limited time offer with clock and sale tags on vibrant background" class="w-full flex-shrink-0" height="300" src="https://storage.googleapis.com/a1aa/image/81c45677-9d99-4017-5dd9-851165d90f18.jpg" width="800"/>
       </div>
      </div>
      <div class="flex justify-center mt-3 space-x-3">
       <button aria-label="Slide 1" class="w-3 h-3 rounded-full bg-indigo-600" data-slide="0">
       </button>
       <button aria-label="Slide 2" class="w-3 h-3 rounded-full bg-gray-300" data-slide="1">
       </button>
       <button aria-label="Slide 3" class="w-3 h-3 rounded-full bg-gray-300" data-slide="2">
       </button>
      </div>
     </div>
     <!-- Product Categories -->
     <div class="max-w-4xl mx-auto grid grid-cols-2 sm:grid-cols-4 gap-8 text-center">
      <button class="category-btn flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-lg transition" data-category="website">
       <i class="fas fa-globe fa-3x text-indigo-600 mb-3">
       </i>
       <span class="font-semibold text-gray-700">
        Website
       </span>
      </button>
      <button class="category-btn flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-lg transition" data-category="script">
       <i class="fas fa-code fa-3x text-indigo-600 mb-3">
       </i>
       <span class="font-semibold text-gray-700">
        Script
       </span>
      </button>
      <button class="category-btn flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-lg transition" data-category="template">
       <i class="fas fa-file-code fa-3x text-indigo-600 mb-3">
       </i>
       <span class="font-semibold text-gray-700">
        Template
       </span>
      </button>
      <button class="category-btn flex flex-col items-center p-4 bg-white rounded-lg shadow hover:shadow-lg transition" data-category="plugin">
       <i class="fas fa-plug fa-3x text-indigo-600 mb-3">
       </i>
       <span class="font-semibold text-gray-700">
        Plugin
       </span>
      </button>
     </div>
    </section>
    <!-- Products Page -->
    <section class="hidden space-y-8 max-w-5xl mx-auto" id="page-products">
     <h2 class="text-3xl font-bold text-indigo-700 mb-6" id="products-category-title">
      Products
     </h2>
     <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8" id="products-list">
      <!-- Products inserted by JS -->
     </div>
     <div class="mt-6">
      <button class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition" id="back-to-dashboard">
       ← Back to Dashboard
      </button>
     </div>
    </section>
    <!-- Product Detail Page -->
    <section class="hidden max-w-4xl mx-auto space-y-6" id="page-product-detail">
     <button class="px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition" id="back-to-products">
      ← Back to Products
     </button>
     <div class="flex flex-col md:flex-row gap-6 bg-white rounded-lg shadow p-6">
      <img alt="" class="w-full md:w-1/2 rounded-lg object-cover" id="product-detail-image" src=""/>
      <div class="flex flex-col justify-between md:w-1/2">
       <div>
        <h3 class="text-2xl font-bold text-indigo-700 mb-3" id="product-detail-title">
        </h3>
        <p class="text-gray-700 mb-4" id="product-detail-description">
        </p>
        <p class="text-xl font-semibold text-indigo-600 mb-6" id="product-detail-price">
        </p>
       </div>
       <button class="w-full md:w-auto px-6 py-3 bg-green-600 text-white rounded hover:bg-green-700 transition text-lg font-semibold" id="buy-product-btn">
        Buy Now
       </button>
      </div>
     </div>
    </section>
    <!-- Checkout Page -->
    <section class="hidden max-w-md mx-auto bg-white rounded-lg shadow p-6 space-y-6" id="page-checkout">
     <h2 class="text-2xl font-bold text-indigo-700">
      Checkout
     </h2>
     <form class="space-y-4" id="checkout-form">
      <div>
       <label class="block text-gray-700 font-semibold mb-1" for="checkout-name">
        Name
       </label>
       <input class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="checkout-name" name="name" required="" type="text"/>
      </div>
      <div>
       <label class="block text-gray-700 font-semibold mb-1" for="checkout-email">
        Email
       </label>
       <input class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="checkout-email" name="email" required="" type="email"/>
      </div>
      <div>
       <p class="text-gray-700 font-semibold">
        Product:
        <span id="checkout-product-name">
        </span>
       </p>
       <p class="text-gray-700 font-semibold">
        Price: $
        <span id="checkout-product-price">
        </span>
       </p>
      </div>
      <button class="w-full py-3 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition font-semibold text-lg" type="submit">
       Pay with PayPal
      </button>
     </form>
    </section>
    <!-- Order Status Page -->
    <section class="hidden max-w-md mx-auto bg-white rounded-lg shadow p-6 space-y-6" id="page-status">
     <h2 class="text-2xl font-bold text-indigo-700">
      Order Status
     </h2>
     <div class="text-gray-700 space-y-2" id="order-info">
      <p>
       <span class="font-semibold">
        Order ID:
       </span>
       <span id="status-order-id">
        #123
       </span>
      </p>
      <p>
       <span class="font-semibold">
        Item:
       </span>
       <span id="status-item-name">
        Sample Product
       </span>
      </p>
      <p>
       <span class="font-semibold">
        Price:
       </span>
       $
       <span id="status-item-price">
        10
       </span>
      </p>
      <p>
       <span class="font-semibold">
        Status:
       </span>
       <span class="inline-block px-2 py-1 rounded text-white bg-yellow-500" id="status-order-status">
        Pending
       </span>
      </p>
     </div>
     <button class="w-full py-3 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition font-semibold text-lg hidden" id="pay-again-btn">
      Pay Now
     </button>
     <a class="block w-full text-center py-3 bg-green-600 text-white rounded hover:bg-green-700 transition font-semibold text-lg hidden" download="" href="#" id="download-link">
      Click to Download Product
     </a>
    </section>
    <!-- Login Page -->
    <section class="hidden max-w-md mx-auto bg-white rounded-lg shadow p-6 space-y-6" id="page-login">
     <h2 class="text-2xl font-bold text-indigo-700">
      Login
     </h2>
     <form class="space-y-4" id="login-form">
      <div>
       <label class="block text-gray-700 font-semibold mb-1" for="login-email">
        Email
       </label>
       <input class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="login-email" name="email" required="" type="email"/>
      </div>
      <div>
       <label class="block text-gray-700 font-semibold mb-1" for="login-password">
        Password
       </label>
       <input class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="login-password" name="password" required="" type="password"/>
      </div>
      <button class="w-full py-3 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition font-semibold text-lg" type="submit">
       Login
      </button>
     </form>
     <p class="text-center text-gray-600">
      Don't have an account?
      <a class="text-indigo-600 hover:underline font-semibold" href="#" id="go-register">
       Register here
      </a>
     </p>
    </section>
    <!-- Register Page -->
    <section class="hidden max-w-md mx-auto bg-white rounded-lg shadow p-6 space-y-6" id="page-register">
     <h2 class="text-2xl font-bold text-indigo-700">
      Register
     </h2>
     <form class="space-y-4" id="register-form">
      <div>
       <label class="block text-gray-700 font-semibold mb-1" for="register-name">
        Name
       </label>
       <input class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="register-name" name="name" required="" type="text"/>
      </div>
      <div>
       <label class="block text-gray-700 font-semibold mb-1" for="register-email">
        Email
       </label>
       <input class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="register-email" name="email" required="" type="email"/>
      </div>
      <div>
       <label class="block text-gray-700 font-semibold mb-1" for="register-password">
        Password
       </label>
       <input class="w-full border border-gray-300 rounded px-3 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-600" id="register-password" name="password" required="" type="password"/>
      </div>
      <button class="w-full py-3 bg-indigo-600 text-white rounded hover:bg-indigo-700 transition font-semibold text-lg" type="submit">
       Register
      </button>
     </form>
     <p class="text-center text-gray-600">
      Already have an account?
      <a class="text-indigo-600 hover:underline font-semibold" href="#" id="go-login">
       Login here
      </a>
     </p>
    </section>
   </main>
  </div>
  <footer class="bg-white border-t mt-12 py-6 text-center text-gray-600 text-sm">
   © 2025 AutomationBot | All rights reserved.
  </footer>
  <!-- PayPal SDK -->
  <script src="https://www.paypal.com/sdk/js?client-id=Ae2UJcfqNOymRYYKMYnE17sXEXBaW8tJF_NZ3M5huk1DREqaMHG_53DcgtePpGv-KXvSBNPxkTfJzboY¤cy=USD">
  </script>
  <script>
   (() => {
      // Data simulation for products
      const productsData = {
        website: [
          {
            id: 'w1',
            title: 'Professional Website Design',
            description: 'A fully responsive and modern website design tailored to your needs.',
            price: 10,
            image: 'https://placehold.co/400x300/png?text=Professional+Website+Design',
            downloadLink: 'https://example.com/downloads/website-design.zip'
          },
          {
            id: 'w2',
            title: 'E-commerce Website Template',
            description: 'A ready-to-use e-commerce website template with shopping cart integration.',
            price: 15,
            image: 'https://placehold.co/400x300/png?text=E-commerce+Website+Template',
            downloadLink: 'https://example.com/downloads/ecommerce-template.zip'
          },
          {
            id: 'w3',
            title: 'Portfolio Website Script',
            description: 'A clean and minimal portfolio website script for creatives.',
            price: 8,
            image: 'https://placehold.co/400x300/png?text=Portfolio+Website+Script',
            downloadLink: 'https://example.com/downloads/portfolio-script.zip'
          }
        ],
        script: [
          {
            id: 's1',
            title: 'JavaScript Utility Library',
            description: 'A lightweight JavaScript utility library for common tasks.',
            price: 7,
            image: 'https://placehold.co/400x300/png?text=JavaScript+Utility+Library',
            downloadLink: 'https://example.com/downloads/js-utility.zip'
          },
          {
            id: 's2',
            title: 'PHP Login Script',
            description: 'Secure PHP login script with session management.',
            price: 12,
            image: 'https://placehold.co/400x300/png?text=PHP+Login+Script',
            downloadLink: 'https://example.com/downloads/php-login.zip'
          },
          {
            id: 's3',
            title: 'Python Web Scraper',
            description: 'A Python script to scrape websites easily.',
            price: 9,
            image: 'https://placehold.co/400x300/png?text=Python+Web+Scraper',
            downloadLink: 'https://example.com/downloads/python-scraper.zip'
          }
        ],
        template: [
          {
            id: 't1',
            title: 'Admin Dashboard Template',
            description: 'A modern admin dashboard template built with Tailwind CSS.',
            price: 14,
            image: 'https://placehold.co/400x300/png?text=Admin+Dashboard+Template',
            downloadLink: 'https://example.com/downloads/admin-dashboard.zip'
          },
          {
            id: 't2',
            title: 'Landing Page Template',
            description: 'A clean landing page template for startups.',
            price: 10,
            image: 'https://placehold.co/400x300/png?text=Landing+Page+Template',
            downloadLink: 'https://example.com/downloads/landing-page.zip'
          },
          {
            id: 't3',
            title: 'Blog Template',
            description: 'A minimal blog template with responsive design.',
            price: 8,
            image: 'https://placehold.co/400x300/png?text=Blog+Template',
            downloadLink: 'https://example.com/downloads/blog-template.zip'
          }
        ],
        plugin: [
          {
            id: 'p1',
            title: 'WordPress SEO Plugin',
            description: 'An SEO plugin to optimize your WordPress site.',
            price: 11,
            image: 'https://placehold.co/400x300/png?text=WordPress+SEO+Plugin',
            downloadLink: 'https://example.com/downloads/seo-plugin.zip'
          },
          {
            id: 'p2',
            title: 'jQuery Slider Plugin',
            description: 'A customizable jQuery slider plugin.',
            price: 9,
            image: 'https://placehold.co/400x300/png?text=jQuery+Slider+Plugin',
            downloadLink: 'https://example.com/downloads/jquery-slider.zip'
          },
          {
            id: 'p3',
            title: 'React Modal Plugin',
            description: 'A React modal plugin for easy popups.',
            price: 13,
            image: 'https://placehold.co/400x300/png?text=React+Modal+Plugin',
            downloadLink: 'https://example.com/downloads/react-modal.zip'
          }
        ]
      };

      // Simulated user database (localStorage)
      const USERS_KEY = 'myshop_users';
      const ORDERS_KEY = 'myshop_orders';
      const SESSION_KEY = 'myshop_session';

      // Current app state
      let currentCategory = null;
      let currentProduct = null;
      let currentOrder = null;
      let currentUser = null;

      // Elements
      const pages = {
        dashboard: document.getElementById('page-dashboard'),
        products: document.getElementById('page-products'),
        productDetail: document.getElementById('page-product-detail'),
        checkout: document.getElementById('page-checkout'),
        status: document.getElementById('page-status'),
        login: document.getElementById('page-login'),
        register: document.getElementById('page-register')
      };

      const navLinks = {
        dashboard: document.querySelectorAll('#nav-dashboard, #nav-dashboard-m'),
        products: document.querySelectorAll('#nav-products, #nav-products-m'),
        checkout: document.querySelectorAll('#nav-checkout, #nav-checkout-m'),
        status: document.querySelectorAll('#nav-status, #nav-status-m'),
        login: document.querySelectorAll('#nav-login, #nav-login-m'),
        register: document.querySelectorAll('#nav-register, #nav-register-m')
      };

      const mobileMenuButton = document.getElementById('mobile-menu-button');
      const mobileMenu = document.getElementById('mobile-menu');

      // Slider controls
      const slider = document.getElementById('slider');
      const slideButtons = slider.parentElement.nextElementSibling.querySelectorAll('button[data-slide]');
      let currentSlideIndex = 0;
      const totalSlides = slider.children.length;

      // Products page elements
      const productsList = document.getElementById('products-list');
      const productsCategoryTitle = document.getElementById('products-category-title');
      const backToDashboardBtn = document.getElementById('back-to-dashboard');

      // Product detail elements
      const productDetailImage = document.getElementById('product-detail-image');
      const productDetailTitle = document.getElementById('product-detail-title');
      const productDetailDescription = document.getElementById('product-detail-description');
      const productDetailPrice = document.getElementById('product-detail-price');
      const buyProductBtn = document.getElementById('buy-product-btn');
      const backToProductsBtn = document.getElementById('back-to-products');

      // Checkout elements
      const checkoutForm = document.getElementById('checkout-form');
      const checkoutProductName = document.getElementById('checkout-product-name');
      const checkoutProductPrice = document.getElementById('checkout-product-price');
      const checkoutNameInput = document.getElementById('checkout-name');
      const checkoutEmailInput = document.getElementById('checkout-email');

      // Order status elements
      const statusOrderId = document.getElementById('status-order-id');
      const statusItemName = document.getElementById('status-item-name');
      const statusItemPrice = document.getElementById('status-item-price');
      const statusOrderStatus = document.getElementById('status-order-status');
      const payAgainBtn = document.getElementById('pay-again-btn');
      const downloadLink = document.getElementById('download-link');

      // Login elements
      const loginForm = document.getElementById('login-form');
      const loginEmailInput = document.getElementById('login-email');
      const loginPasswordInput = document.getElementById('login-password');
      const goRegisterLink = document.getElementById('go-register');

      // Register elements
      const registerForm = document.getElementById('register-form');
      const registerNameInput = document.getElementById('register-name');
      const registerEmailInput = document.getElementById('register-email');
      const registerPasswordInput = document.getElementById('register-password');
      const goLoginLink = document.getElementById('go-login');

      // Category buttons on dashboard
      const categoryButtons = document.querySelectorAll('.category-btn');

      // Utility functions
      function saveUsers(users) {
        localStorage.setItem(USERS_KEY, JSON.stringify(users));
      }
      function loadUsers() {
        const users = localStorage.getItem(USERS_KEY);
        return users ? JSON.parse(users) : [];
      }
      function saveOrders(orders) {
        localStorage.setItem(ORDERS_KEY, JSON.stringify(orders));
      }
      function loadOrders() {
        const orders = localStorage.getItem(ORDERS_KEY);
        return orders ? JSON.parse(orders) : [];
      }
      function saveSession(user) {
        localStorage.setItem(SESSION_KEY, JSON.stringify(user));
      }
      function loadSession() {
        const user = localStorage.getItem(SESSION_KEY);
        return user ? JSON.parse(user) : null;
      }
      function clearSession() {
        localStorage.removeItem(SESSION_KEY);
      }

      // Show only one page
      function showPage(pageName) {
        Object.entries(pages).forEach(([key, el]) => {
          if (key === pageName) {
            el.classList.remove('hidden');
          } else {
            el.classList.add('hidden');
          }
        });
        // Close mobile menu on navigation
        mobileMenu.classList.add('hidden');
      }

      // Navigation handlers
      navLinks.dashboard.forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          showDashboard();
        });
      });
      navLinks.products.forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          showProductsPage(currentCategory || 'website');
        });
      });
      navLinks.checkout.forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          if (currentProduct) {
            showCheckoutPage(currentProduct);
          } else {
            alert('Please select a product first.');
            showDashboard();
          }
        });
      });
      navLinks.status.forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          if (currentOrder) {
            showStatusPage(currentOrder);
          } else {
            alert('No order found.');
            showDashboard();
          }
        });
      });
      navLinks.login.forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          showPage('login');
        });
      });
      navLinks.register.forEach(link => {
        link.addEventListener('click', e => {
          e.preventDefault();
          showPage('register');
        });
      });

      // Mobile menu toggle
      mobileMenuButton.addEventListener('click', () => {
        mobileMenu.classList.toggle('hidden');
      });

      // Slider functionality
      function updateSlider() {
        slider.style.transform = `translateX(-${currentSlideIndex * 100}%)`;
        slideButtons.forEach((btn, idx) => {
          if (idx === currentSlideIndex) {
            btn.classList.remove('bg-gray-300');
            btn.classList.add('bg-indigo-600');
          } else {
            btn.classList.remove('bg-indigo-600');
            btn.classList.add('bg-gray-300');
          }
        });
      }
      slideButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          currentSlideIndex = parseInt(btn.dataset.slide);
          updateSlider();
        });
      });
      // Auto slide every 5 seconds
      setInterval(() => {
        currentSlideIndex = (currentSlideIndex + 1) % totalSlides;
        updateSlider();
      }, 5000);

      // Dashboard category click
      categoryButtons.forEach(btn => {
        btn.addEventListener('click', () => {
          const category = btn.dataset.category;
          currentCategory = category;
          showProductsPage(category);
        });
      });

      // Show dashboard page
      function showDashboard() {
        currentProduct = null;
        currentCategory = null;
        showPage('dashboard');
      }

      // Show products page for category
      function showProductsPage(category) {
        currentCategory = category;
        currentProduct = null;
        productsCategoryTitle.textContent = `Products - ${capitalize(category)}`;
        productsList.innerHTML = '';
        const products = productsData[category] || [];
        products.forEach(product => {
          const card = document.createElement('div');
          card.className = 'bg-white rounded-lg shadow hover:shadow-lg transition cursor-pointer flex flex-col';
          card.tabIndex = 0;
          card.setAttribute('role', 'button');
          card.setAttribute('aria-pressed', 'false');
          card.innerHTML = `
            <img src="${product.image}" alt="Thumbnail image of product titled ${product.title}" class="rounded-t-lg object-cover w-full h-48" />
            <div class="p-4 flex flex-col flex-grow">
              <h3 class="text-lg font-semibold text-indigo-700 mb-2">${product.title}</h3>
              <p class="text-gray-600 flex-grow">${product.description}</p>
              <p class="text-indigo-600 font-bold mt-4 text-xl">$${product.price}</p>
            </div>
          `;
          card.addEventListener('click', () => {
            showProductDetail(product);
          });
          card.addEventListener('keydown', e => {
            if (e.key === 'Enter' || e.key === ' ') {
              e.preventDefault();
              showProductDetail(product);
            }
          });
          productsList.appendChild(card);
        });
        showPage('products');
      }

      backToDashboardBtn.addEventListener('click', () => {
        showDashboard();
      });

      // Show product detail page
      function showProductDetail(product) {
        currentProduct = product;
        productDetailImage.src = product.image;
        productDetailImage.alt = `Detailed image of product titled ${product.title}`;
        productDetailTitle.textContent = product.title;
        productDetailDescription.textContent = product.description;
        productDetailPrice.textContent = `$${product.price}`;
        showPage('productDetail');
      }

      backToProductsBtn.addEventListener('click', () => {
        if (currentCategory) {
          showProductsPage(currentCategory);
        } else {
          showDashboard();
        }
      });

      // Buy product button click
      buyProductBtn.addEventListener('click', () => {
        if (!currentProduct) {
          alert('No product selected.');
          return;
        }
        checkoutNameInput.value = '';
        checkoutEmailInput.value = '';
        checkoutProductName.textContent = currentProduct.title;
        checkoutProductPrice.textContent = currentProduct.price;
        showPage('checkout');
      });

      // Checkout form submit
      checkoutForm.addEventListener('submit', e => {
        e.preventDefault();
        if (!currentProduct) {
          alert('No product selected.');
          return;
        }
        const name = checkoutNameInput.value.trim();
        const email = checkoutEmailInput.value.trim();
        if (!name || !email) {
          alert('Please fill in your name and email.');
          return;
        }
        if (!validateEmail(email)) {
          alert('Please enter a valid email address.');
          return;
        }
        // Save order with pending status
        const orderId = generateOrderId();
        currentOrder = {
          id: orderId,
          productId: currentProduct.id,
          productTitle: currentProduct.title,
          price: currentProduct.price,
          status: 'pending',
          name,
          email,
          downloadLink: currentProduct.downloadLink
        };
        saveOrder(currentOrder);
        // Start PayPal payment
        startPayPalPayment(currentOrder);
      });

      // Validate email format simple
      function validateEmail(email) {
        return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
      }

      // Generate order id (simple random)
      function generateOrderId() {
        return 'ORD' + Math.floor(Math.random() * 1000000);
      }

      // Save order to localStorage
      function saveOrder(order) {
        const orders = loadOrders();
        // Remove existing order with same id if any
        const filtered = orders.filter(o => o.id !== order.id);
        filtered.push(order);
        saveOrders(filtered);
      }

      // Load order by id
      function loadOrderById(id) {
        const orders = loadOrders();
        return orders.find(o => o.id === id) || null;
      }

      // Show order status page
      function showStatusPage(order) {
        statusOrderId.textContent = order.id;
        statusItemName.textContent = order.productTitle;
        statusItemPrice.textContent = order.price;
        if (order.status === 'pending') {
          statusOrderStatus.textContent = 'Pending';
          statusOrderStatus.className = 'inline-block px-2 py-1 rounded text-white bg-yellow-500';
          payAgainBtn.classList.remove('hidden');
          downloadLink.classList.add('hidden');
        } else if (order.status === 'success') {
          statusOrderStatus.textContent = 'Success';
          statusOrderStatus.className = 'inline-block px-2 py-1 rounded text-white bg-green-600';
          payAgainBtn.classList.add('hidden');
          downloadLink.href = order.downloadLink;
          downloadLink.classList.remove('hidden');
        } else {
          statusOrderStatus.textContent = order.status;
          statusOrderStatus.className = 'inline-block px-2 py-1 rounded text-white bg-gray-500';
          payAgainBtn.classList.add('hidden');
          downloadLink.classList.add('hidden');
        }
        showPage('status');
      }

      // Pay again button click
      payAgainBtn.addEventListener('click', () => {
        if (currentOrder) {
          startPayPalPayment(currentOrder);
        }
      });

      // Start PayPal payment flow
      function startPayPalPayment(order) {
        showPage('checkout');
        // Clear previous buttons if any
        const existingButtons = document.getElementById('paypal-button-container');
        if (existingButtons) {
          existingButtons.remove();
        }
        // Create container for PayPal buttons
        const container = document.createElement('div');
        container.id = 'paypal-button-container';
        checkoutForm.appendChild(container);

        // Disable form submit button while PayPal buttons show
        checkoutForm.querySelector('button[type="submit"]').disabled = true;

        paypal.Buttons({
          style: {
            layout: 'vertical',
            color: 'blue',
            shape: 'rect',
            label: 'paypal'
          },
          createOrder: function(data, actions) {
            return actions.order.create({
              purchase_units: [{
                amount: {
                  value: order.price.toFixed(2)
                },
                description: order.productTitle
              }]
            });
          },
          onApprove: function(data, actions) {
            return actions.order.capture().then(function(details) {
              // Payment successful
              order.status = 'success';
              saveOrder(order);
              currentOrder = order;
              alert(`Transaction completed by ${details.payer.name.given_name}`);
              showStatusPage(order);
            });
          },
          onCancel: function(data) {
            alert('Payment cancelled.');
          },
          onError: function(err) {
            alert('An error occurred during the payment process.');
            console.error(err);
          }
        }).render('#paypal-button-container');
      }

      // Capitalize first letter
      function capitalize(str) {
        if (!str) return '';
        return str.charAt(0).toUpperCase() + str.slice(1);
      }

      // Login form submit
      loginForm.addEventListener('submit', e => {
        e.preventDefault();
        const email = loginEmailInput.value.trim().toLowerCase();
        const password = loginPasswordInput.value;
        if (!email || !password) {
          alert('Please fill in all fields.');
          return;
        }
        const users = loadUsers();
        const user = users.find(u => u.email === email);
        if (!user) {
          alert('User not found.');
          return;
        }
        if (user.password !== password) {
          alert('Incorrect password.');
          return;
        }
        currentUser = { name: user.name, email: user.email };
        saveSession(currentUser);
        alert(`Welcome back, ${user.name}!`);
        showDashboard();
      });

      // Register form submit
      registerForm.addEventListener('submit', e => {
        e.preventDefault();
        const name = registerNameInput.value.trim();
        const email = registerEmailInput.value.trim().toLowerCase();
        const password = registerPasswordInput.value;
        if (!name || !email || !password) {
          alert('Please fill in all fields.');
          return;
        }
        if (!validateEmail(email)) {
          alert('Please enter a valid email address.');
          return;
        }
        const users = loadUsers();
        if (users.find(u => u.email === email)) {
          alert('Email already registered.');
          return;
        }
        users.push({ name, email, password });
        saveUsers(users);
        alert('Registration successful! You can now login.');
        showPage('login');
      });

      // Links to switch between login and register
      goRegisterLink.addEventListener('click', e => {
        e.preventDefault();
        showPage('register');
      });
      goLoginLink.addEventListener('click', e => {
        e.preventDefault();
        showPage('login');
      });

      // On page load, show dashboard
      showDashboard();

    })();
  </script>
 </body>
</html>
